# 🎨 Spotless カスタム設定例

## 📋 設定変更パターン集

### **パターン1: AOSP Style (4スペースインデント)**

```xml
<java>
    <includes>
        <include>src/main/java/**/*.java</include>
        <include>src/test/java/**/*.java</include>
    </includes>

    <!-- AOSP Style 適用 -->
    <googleJavaFormat>
        <version>1.19.2</version>
        <style>AOSP</style>  <!-- 4スペースインデント -->
        <reflowLongStrings>true</reflowLongStrings>
    </googleJavaFormat>

    <removeUnusedImports />
    <importOrder>
        <order>java,javax,org,com</order>
    </importOrder>
    <endWithNewline />
</java>
```

### **パターン2: Spring Boot向けインポート順序**

```xml
<java>
    <includes>
        <include>src/main/java/**/*.java</include>
        <include>src/test/java/**/*.java</include>
    </includes>

    <googleJavaFormat>
        <version>1.19.2</version>
        <style>GOOGLE</style>
        <reflowLongStrings>true</reflowLongStrings>
    </googleJavaFormat>

    <removeUnusedImports />
    
    <!-- Spring Boot向け詳細インポート順序 -->
    <importOrder>
        <order>java,javax,org.junit,org.mockito,org.springframework,org,com.example,com,</order>
    </importOrder>
    
    <endWithNewline />
</java>
```

### **パターン3: カスタムEclipseフォーマッター**

```xml
<java>
    <includes>
        <include>src/main/java/**/*.java</include>
        <include>src/test/java/**/*.java</include>
    </includes>

    <!-- Google Java Format を無効化してEclipseフォーマッターを使用 -->
    <eclipse>
        <file>config/eclipse-java-formatter.xml</file>
        <version>4.26.0</version>
    </eclipse>

    <removeUnusedImports />
    <importOrder>
        <order>java,javax,org,com</order>
    </importOrder>
    <endWithNewline />
</java>
```

### **パターン4: 特定ファイル除外**

```xml
<java>
    <!-- 対象ファイル指定 -->
    <includes>
        <include>src/main/java/**/*.java</include>
        <include>src/test/java/**/*.java</include>
    </includes>
    
    <!-- 除外ファイル指定 -->
    <excludes>
        <exclude>src/main/java/com/example/dailyreport/generated/**</exclude>
        <exclude>src/main/java/**/*AutoGenerated.java</exclude>
    </excludes>

    <googleJavaFormat>
        <version>1.19.2</version>
        <style>GOOGLE</style>
        <reflowLongStrings>true</reflowLongStrings>
    </googleJavaFormat>

    <removeUnusedImports />
    <importOrder>
        <order>java,javax,org,com</order>
    </importOrder>
    <endWithNewline />
</java>
```

### **パターン5: より柔軟なPalantir Java Format**

```xml
<java>
    <includes>
        <include>src/main/java/**/*.java</include>
        <include>src/test/java/**/*.java</include>
    </includes>

    <!-- Palantir Java Format (より柔軟) -->
    <palantirJavaFormat>
        <version>2.35.0</version>
    </palantirJavaFormat>

    <removeUnusedImports />
    <importOrder>
        <order>java,javax,org,com</order>
    </importOrder>
    <endWithNewline />
</java>
```

## 🔧 設定変更手順

### **Step 1: 設定変更**
1. `backend/pom.xml` を編集
2. 上記パターンから選択してコピー&ペースト

### **Step 2: 依存関係更新**
```bash
cd backend
./mvnw clean install
```

### **Step 3: フォーマット適用**
```bash
./mvnw spotless:apply
```

### **Step 4: 確認**
```bash
./mvnw spotless:check
```

## 📊 各フォーマッターの特徴比較

| フォーマッター | インデント | 行長 | 柔軟性 | 人気度 |
|--------------|------------|------|--------|--------|
| **Google Java Format (GOOGLE)** | 2スペース | 100文字 | 低 | ⭐⭐⭐⭐⭐ |
| **Google Java Format (AOSP)** | 4スペース | 100文字 | 低 | ⭐⭐⭐⭐ |
| **Eclipse Formatter** | カスタム可 | カスタム可 | 高 | ⭐⭐⭐ |
| **Palantir Java Format** | 4スペース | 120文字 | 中 | ⭐⭐ |

## 🎯 推奨設定

### **チーム開発向け (安定重視)**
- **Google Java Format (GOOGLE)** を推奨
- 設定がシンプルで一貫性が保たれる

### **既存プロジェクト移行**
- **Google Java Format (AOSP)** を推奨  
- 4スペースで既存コードとの親和性が高い

### **高度なカスタマイズが必要**
- **Eclipse Formatter** を推奨
- 細かい設定が可能

## ⚠️ 注意事項

### **設定変更時のリスク**
1. **大量ファイル変更**: 既存コード全体が変更される可能性
2. **Git履歴**: フォーマット変更で実質的な変更が見えにくくなる
3. **チーム同期**: 全メンバーが同じ設定を使用する必要

### **推奨される変更タイミング**
- プロジェクト開始時
- メジャーリリース後
- チーム合意のタイミング

### **安全な変更手順**
```bash
# 1. 現在の状態をコミット
git add . && git commit -m "feat: Spotless設定変更前のコミット"

# 2. 設定変更
vim pom.xml

# 3. フォーマット適用
./mvnw spotless:apply

# 4. 変更確認
git diff

# 5. フォーマット変更をコミット  
git add . && git commit -m "style: Spotlessフォーマット設定をAOSPに変更"
```